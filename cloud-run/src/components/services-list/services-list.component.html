<div class="p-6">
  <!-- Description Section -->
  <p class="text-gray-600 mb-4">A service exposes a unique endpoint and automatically scales the underlying infrastructure to handle incoming requests.<br>Deploy a container image, source code or a function to create a service.</p>

  <!-- Table Container -->
  <div class="bg-white border border-gray-200 rounded-md overflow-hidden">
    <!-- Toolbar -->
    <div class="p-2 border-b border-gray-200 flex items-center justify-between">
      <div class="flex items-center">
        <svg class="w-5 h-5 text-gray-500 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.572a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z" /></svg>
        <input 
          type="text" 
          placeholder="Filter services" 
          class="text-sm focus:outline-none"
          [value]="filterTerm()"
          (input)="onFilterChange($event)">
      </div>
      <div class="flex items-center space-x-2">
        <button class="p-2 rounded-full hover:bg-gray-100 text-gray-500">
           <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75" /></svg>
        </button>
        <button class="p-2 rounded-full hover:bg-gray-100 text-gray-500">
           <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 9h16.5m-16.5 6.75h16.5" /></svg>
        </button>
      </div>
    </div>
    
    <!-- Table -->
    <table class="w-full text-left text-sm">
      <thead class="bg-gray-50 border-b border-gray-200">
        <tr>
          <th class="p-3 w-10"><input type="checkbox" class="rounded border-gray-400" [checked]="selectAll()" (change)="toggleSelectAll.emit($event.target.checked)"></th>
          <th class="p-3 w-10"></th>
          <th class="p-3 font-medium text-gray-600 cursor-pointer" (click)="sortBy('name')">
            <div class="flex items-center">
              Name
              @if (sortColumn() === 'name') {
                <span class="ml-1">{{ sortDirection() === 'asc' ? '↑' : '↓' }}</span>
              }
            </div>
          </th>
          <th class="p-3 font-medium text-gray-600">Deployment type</th>
          <th class="p-3 font-medium text-gray-600">Req/sec</th>
          <th class="p-3 font-medium text-gray-600">Region</th>
          <th class="p-3 font-medium text-gray-600">Authentication</th>
          <th class="p-3 font-medium text-gray-600">Ingress</th>
          <th class="p-3 font-medium text-gray-600">Scaling</th>
          <th class="p-3 font-medium text-gray-600 cursor-pointer" (click)="sortBy('lastDeployed')">
            <div class="flex items-center">
              Last deployed
              @if (sortColumn() === 'lastDeployed') {
                <span class="ml-1">{{ sortDirection() === 'asc' ? '↑' : '↓' }}</span>
              }
            </div>
          </th>
          <th class="p-3 font-medium text-gray-600">Deployed by</th>
        </tr>
      </thead>
      <tbody>
        @for (service of filteredAndSortedServices(); track service.name) {
          <tr class="border-b border-gray-200 last:border-b-0 hover:bg-gray-50" [class.bg-blue-50]="service.selected">
            <td class="p-3"><input type="checkbox" class="rounded border-gray-400" [checked]="service.selected" (change)="toggleSelect.emit(service.name)"></td>
            <td class="p-3">
              @if (service.status === 'running') {
                <svg class="w-4 h-4 text-green-600" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
              }
            </td>
            <td class="p-3">
              <button (click)="serviceSelected.emit(service)" class="text-blue-600 font-medium hover:underline text-left">{{ service.name }}</button>
            </td>
            <td class="p-3 text-gray-800 flex items-center">
              <svg class="w-4 h-4 mr-2 text-gray-700" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
              {{ service.deploymentType }}
            </td>
            <td class="p-3 text-gray-800">{{ service.requestsPerSecond }}</td>
            <td class="p-3 text-gray-800">{{ service.region }}</td>
            <td class="p-3 text-gray-800">{{ service.authentication }}</td>
            <td class="p-3 text-gray-800">{{ service.ingress }}</td>
            <td class="p-3 text-gray-800">{{ service.scaling }}</td>
            <td class="p-3 text-gray-800">{{ service.lastDeployed }}</td>
            <td class="p-3 text-gray-800">{{ service.deployedBy }}</td>
          </tr>
        }
      </tbody>
    </table>
    @if (filteredAndSortedServices().length === 0) {
      <div class="p-6 text-center text-gray-500">
        No services found matching your filter.
      </div>
    }
  </div>
</div>
